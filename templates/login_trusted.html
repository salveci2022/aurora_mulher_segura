<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Confian√ßa ¬∑ Aurora</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <style>
    /* Ajustes adicionais sem modificar o design original */
    .alert-danger {
      background: rgba(255, 80, 130, 0.15);
      border: 1px solid rgba(255, 80, 130, 0.45);
      color: #ffb0c0;
      padding: 10px 12px;
      border-radius: 14px;
      margin-bottom: 15px;
      font-size: 13px;
      text-align: center;
    }
    .info-box {
      background: rgba(255, 79, 200, 0.1);
      border: 1px solid rgba(255, 79, 200, 0.3);
      border-radius: 14px;
      padding: 10px;
      margin-top: 15px;
      font-size: 12px;
    }
    .credentials-hint {
      color: #cdb7e6;
      font-size: 11px;
      margin-top: 5px;
    }
  </style>
</head>
<body class="aurora-bg">
  <main class="center-wrap">
    <section class="aurora-card">
      <div class="topbar">
        <div class="brand">
          <div class="brand-dot">‚ôÄ</div>
          <div>
            <div class="brand-title">AURORA_MULHER_SEGURA</div>
            <div class="brand-sub">Pessoa de Confian√ßa</div>
          </div>
        </div>
        <div class="top-actions">
          <a class="pill" href="/panic">Painel da mulher</a>
        </div>
      </div>

      <div class="content">
        <h1 class="h1">üîê LOGIN</h1>
        <p class="center muted small">Acesse o painel para acompanhar alertas em tempo real</p>

        {% if error %}
        <div class="alert alert-danger">
          {% if error_msg %}
            {{ error_msg }}
          {% else %}
            ‚ùå Usu√°rio ou senha inv√°lidos. Tente novamente.
          {% endif %}
        </div>
        {% endif %}

        {% with messages = get_flashed_messages() %}
          {% if messages %}
            {% for message in messages %}
              <div class="alert alert-ok">{{ message }}</div>
            {% endfor %}
          {% endif %}
        {% endwith %}

        <form method="post" id="loginForm">
          <label class="label">üë§ Usu√°rio</label>
          <input class="input" type="text" name="user" placeholder="ex: kalino, maeana" required autofocus>
          
          <label class="label">üîë Senha</label>
          <input class="input" type="password" name="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
          
          <div class="center small muted" style="margin: 8px 0;">
            <a class="link" href="/trusted/recover">Esqueci minha senha</a>
          </div>
          
          <button class="btn btn-primary" type="submit">Entrar no Painel</button>
        </form>

        <div class="info-box">
          <div style="text-align: center; margin-bottom: 8px;">
            <span style="color: #ffd0f0;">‚ÑπÔ∏è Informa√ß√µes importantes</span>
          </div>
          <ul style="margin: 0; padding-left: 20px; color: #cdb7e6;">
            <li>O painel mostra alertas em tempo real</li>
            <li>Clique em "Ativar som" para ouvir a sirene</li>
            <li>Localiza√ß√£o precisa aparece no mapa</li>
            <li>Use os bot√µes para Google Maps ou Waze</li>
          </ul>
        </div>

        <div class="center" style="margin-top: 15px;">
          <span class="badge">üü¢ Sistema Online</span>
          <span class="badge">üìç GPS Ativo</span>
        </div>

        <div class="center small muted" style="margin-top: 15px;">
          <a class="link" href="/panel/login">Admin</a> ¬∑ 
          <a class="link" href="/health">Diagn√≥stico</a> ¬∑ 
          <a class="link" href="/legal">Termos</a>
        </div>

        <div class="credentials-hint center">
          <span>‚ö° Precisa de ajuda? Fale com o administrador</span>
        </div>
      </div>
    </section>
  </main>

  <script>
    // Pequeno script para melhorar a experi√™ncia do usu√°rio
    (function() {
      console.log("üîê P√°gina de login da Pessoa de Confian√ßa carregada");
      
      const form = document.getElementById('loginForm');
      const userInput = document.querySelector('input[name="user"]');
      const passwordInput = document.querySelector('input[name="password"]');
      
      // Auto-capitalizar primeira letra do usu√°rio?
      if (userInput) {
        userInput.addEventListener('blur', function() {
          // Mant√©m min√∫sculas para evitar problemas de case-sensitive
          this.value = this.value.toLowerCase().trim();
        });
      }
      
      // Prevenir envio acidental com campos vazios
      form.addEventListener('submit', function(e) {
        if (!userInput.value.trim() || !passwordInput.value.trim()) {
          e.preventDefault();
          alert('Por favor, preencha usu√°rio e senha');
        }
      });
      
      // Mostrar instru√ß√µes no console para debug
      console.log("üìã Credenciais padr√£o (apenas para teste):");
      console.log("   Usu√°rio: [nome cadastrado pelo admin]");
      console.log("   Senha: [definida pelo admin]");
    })();
  </script>
</body>
</html>